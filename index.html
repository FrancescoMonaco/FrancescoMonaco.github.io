<!DOCTYPE html>
<html lang="en"></html>
<html>
<!-- Head, a navbar that offers access to home and github -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="/CSS/style.css">
</head>
<body>
    <div class="wrapper">
        <div class="topnav">
            <a href="index.html">Home</a>
            <a href="https://github.com/FrancescoMonaco">Github</a>
        </div>

        <div class="row">
            <div class="leftcolumn">
                <h1>Left Column</h1>
                <p>Placeholder.</p>
            </div>

            <div class="rightcolumn">
                <h2>Right Column</h2>
                <p>Placeholder.</p>
            </div>
        </div>
        <div class="footer">
            <div id="now-playing">
                <img id="song-artwork" src="" alt="Song Artwork">
                <p>Now Playing:</p>
                <p id="song-info"></p>
            </div>
        </div>
    </div>
     <!-- JavaScript to fetch the now-playing song from Last.fm -->
    <script>
        const apiKey = process.env.LASTFM_API_KEY;
        const username = 'Piowithoutblood';
      
        async function getNowPlaying() {
          try {
            const response = await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${username}&api_key=${apiKey}&format=json`);
            const data = await response.json();
            const track = data.recenttracks.track[0];
            const songInfo = `${track.name} by ${track.artist['#text']}`;
            const songArtwork = track.image[2]['#text']; // Use the URL of the artwork

            // Update the song artwork image
            const artworkImage = document.getElementById('song-artwork');
            artworkImage.src = songArtwork;

            document.getElementById('song-info').textContent = songInfo;
          } catch (error) {
            console.error('Error fetching data from Last.fm:', error);
          }
        }
      
        // Call the function to get and display the now-playing song
        getNowPlaying();
      </script>
      
</body>

</html>